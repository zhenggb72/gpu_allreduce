#!/bin/bash
export ONEAPI_DEVICE_SELECTOR=level_zero:gpu
export FI_PROVIDER=tcp
export IGC_DumpToCustomDir=./dump
export IGC_ShaderDumpEnable=1

mpirun -np 16 ./allreduce -c 16 -t float
mpirun -np 16 ./allreduce -c 32 -t float
mpirun -np 16 ./allreduce -c 64 -t float
mpirun -np 16 ./allreduce -c 128 -t float
mpirun -np 16 ./allreduce -c 256 -t float
mpirun -np 16 ./allreduce -c 512 -t float
mpirun -np 16 ./allreduce -c 1024 -t float
mpirun -np 16 ./allreduce -c 2048 -t float
mpirun -np 16 ./allreduce -c 4096 -t float
mpirun -np 16 ./allreduce -c 8192 -t float
mpirun -np 16 ./allreduce -c 14336 -t float
mpirun -np 16 ./allreduce -c 16384 -t float
mpirun -np 16 ./allreduce -c 32768 -t float
mpirun -np 16 ./allreduce -c 65536 -t float
mpirun -np 16 ./allreduce -c 131072 -t float
mpirun -np 16 ./allreduce -c 262144 -t float
mpirun -np 16 ./allreduce -c 458752 -t float
mpirun -np 16 ./allreduce -c 524288 -t float
mpirun -np 16 ./allreduce -c 11 -t float
mpirun -np 16 ./allreduce -c 222 -t float
mpirun -np 16 ./allreduce -c 3333 -t float
mpirun -np 16 ./allreduce -c 44444 -t float
mpirun -np 16 ./allreduce -c 15 -t float
mpirun -np 16 ./allreduce -c 31 -t float
mpirun -np 16 ./allreduce -c 63 -t float
mpirun -np 16 ./allreduce -c 127 -t float
mpirun -np 16 ./allreduce -c 255 -t float
mpirun -np 16 ./allreduce -c 511 -t float
mpirun -np 16 ./allreduce -c 1023 -t float
mpirun -np 16 ./allreduce -c 2047 -t float
mpirun -np 16 ./allreduce -c 4095 -t float
mpirun -np 16 ./allreduce -c 8191 -t float
mpirun -np 16 ./allreduce -c 14335 -t float
mpirun -np 16 ./allreduce -c 16383 -t float
mpirun -np 16 ./allreduce -c 32767 -t float
mpirun -np 16 ./allreduce -c 65535 -t float
mpirun -np 16 ./allreduce -c 131071 -t float
mpirun -np 16 ./allreduce -c 262143 -t float
mpirun -np 16 ./allreduce -c 458751 -t float
mpirun -np 16 ./allreduce -c 524287 -t float
mpirun -np 16 ./allreduce -c 17 -t float
mpirun -np 16 ./allreduce -c 34 -t float
mpirun -np 16 ./allreduce -c 65 -t float
mpirun -np 16 ./allreduce -c 129 -t float
mpirun -np 16 ./allreduce -c 257 -t float
mpirun -np 16 ./allreduce -c 513 -t float
mpirun -np 16 ./allreduce -c 1025 -t float
mpirun -np 16 ./allreduce -c 2049 -t float
mpirun -np 16 ./allreduce -c 4097 -t float
mpirun -np 16 ./allreduce -c 8193 -t float
mpirun -np 16 ./allreduce -c 14337 -t float
mpirun -np 16 ./allreduce -c 16385 -t float
mpirun -np 16 ./allreduce -c 32769 -t float
mpirun -np 16 ./allreduce -c 65537 -t float
mpirun -np 16 ./allreduce -c 131073 -t float
mpirun -np 16 ./allreduce -c 262145 -t float
mpirun -np 16 ./allreduce -c 458753 -t float

mpirun -np 8 ./allreduce -c 16 -t float
mpirun -np 8 ./allreduce -c 32 -t float
mpirun -np 8 ./allreduce -c 64 -t float
mpirun -np 8 ./allreduce -c 128 -t float
mpirun -np 8 ./allreduce -c 256 -t float
mpirun -np 8 ./allreduce -c 512 -t float
mpirun -np 8 ./allreduce -c 1024 -t float
mpirun -np 8 ./allreduce -c 2048 -t float
mpirun -np 8 ./allreduce -c 4096 -t float
mpirun -np 8 ./allreduce -c 8192 -t float
mpirun -np 8 ./allreduce -c 14336 -t float
mpirun -np 8 ./allreduce -c 16384 -t float
mpirun -np 8 ./allreduce -c 32768 -t float
mpirun -np 8 ./allreduce -c 65536 -t float
mpirun -np 8 ./allreduce -c 131072 -t float
mpirun -np 8 ./allreduce -c 262144 -t float
mpirun -np 8 ./allreduce -c 458752 -t float
mpirun -np 8 ./allreduce -c 524288 -t float
mpirun -np 8 ./allreduce -c 11 -t float
mpirun -np 8 ./allreduce -c 222 -t float
mpirun -np 8 ./allreduce -c 3333 -t float
mpirun -np 8 ./allreduce -c 44444 -t float
mpirun -np 8 ./allreduce -c 15 -t float
mpirun -np 8 ./allreduce -c 31 -t float
mpirun -np 8 ./allreduce -c 63 -t float
mpirun -np 8 ./allreduce -c 127 -t float
mpirun -np 8 ./allreduce -c 255 -t float
mpirun -np 8 ./allreduce -c 511 -t float
mpirun -np 8 ./allreduce -c 1023 -t float
mpirun -np 8 ./allreduce -c 2047 -t float
mpirun -np 8 ./allreduce -c 4095 -t float
mpirun -np 8 ./allreduce -c 8191 -t float
mpirun -np 8 ./allreduce -c 14335 -t float
mpirun -np 8 ./allreduce -c 16383 -t float
mpirun -np 8 ./allreduce -c 32767 -t float
mpirun -np 8 ./allreduce -c 65535 -t float
mpirun -np 8 ./allreduce -c 131071 -t float
mpirun -np 8 ./allreduce -c 262143 -t float
mpirun -np 8 ./allreduce -c 458751 -t float
mpirun -np 8 ./allreduce -c 524287 -t float
mpirun -np 8 ./allreduce -c 17 -t float
mpirun -np 8 ./allreduce -c 34 -t float
mpirun -np 8 ./allreduce -c 65 -t float
mpirun -np 8 ./allreduce -c 129 -t float
mpirun -np 8 ./allreduce -c 257 -t float
mpirun -np 8 ./allreduce -c 513 -t float
mpirun -np 8 ./allreduce -c 1025 -t float
mpirun -np 8 ./allreduce -c 2049 -t float
mpirun -np 8 ./allreduce -c 4097 -t float
mpirun -np 8 ./allreduce -c 8193 -t float
mpirun -np 8 ./allreduce -c 14337 -t float
mpirun -np 8 ./allreduce -c 16385 -t float
mpirun -np 8 ./allreduce -c 32769 -t float
mpirun -np 8 ./allreduce -c 65537 -t float
mpirun -np 8 ./allreduce -c 131073 -t float
mpirun -np 8 ./allreduce -c 262145 -t float
mpirun -np 8 ./allreduce -c 458753 -t float

mpirun -np 6 ./allreduce -c 16 -t float
mpirun -np 6 ./allreduce -c 32 -t float
mpirun -np 6 ./allreduce -c 64 -t float
mpirun -np 6 ./allreduce -c 128 -t float
mpirun -np 6 ./allreduce -c 256 -t float
mpirun -np 6 ./allreduce -c 512 -t float
mpirun -np 6 ./allreduce -c 1024 -t float
mpirun -np 6 ./allreduce -c 2048 -t float
mpirun -np 6 ./allreduce -c 4096 -t float
mpirun -np 6 ./allreduce -c 8192 -t float
mpirun -np 6 ./allreduce -c 14336 -t float
mpirun -np 6 ./allreduce -c 16384 -t float
mpirun -np 6 ./allreduce -c 32768 -t float
mpirun -np 6 ./allreduce -c 65536 -t float
mpirun -np 6 ./allreduce -c 131072 -t float
mpirun -np 6 ./allreduce -c 262144 -t float
mpirun -np 6 ./allreduce -c 458752 -t float
mpirun -np 6 ./allreduce -c 524288 -t float
mpirun -np 6 ./allreduce -c 11 -t float
mpirun -np 6 ./allreduce -c 222 -t float
mpirun -np 6 ./allreduce -c 3333 -t float
mpirun -np 6 ./allreduce -c 44444 -t float
mpirun -np 6 ./allreduce -c 15 -t float
mpirun -np 6 ./allreduce -c 31 -t float
mpirun -np 6 ./allreduce -c 63 -t float
mpirun -np 6 ./allreduce -c 127 -t float
mpirun -np 6 ./allreduce -c 255 -t float
mpirun -np 6 ./allreduce -c 511 -t float
mpirun -np 6 ./allreduce -c 1023 -t float
mpirun -np 6 ./allreduce -c 2047 -t float
mpirun -np 6 ./allreduce -c 4095 -t float
mpirun -np 6 ./allreduce -c 8191 -t float
mpirun -np 6 ./allreduce -c 14335 -t float
mpirun -np 6 ./allreduce -c 16383 -t float
mpirun -np 6 ./allreduce -c 32767 -t float
mpirun -np 6 ./allreduce -c 65535 -t float
mpirun -np 6 ./allreduce -c 131071 -t float
mpirun -np 6 ./allreduce -c 262143 -t float
mpirun -np 6 ./allreduce -c 458751 -t float
mpirun -np 6 ./allreduce -c 524287 -t float
mpirun -np 6 ./allreduce -c 17 -t float
mpirun -np 6 ./allreduce -c 34 -t float
mpirun -np 6 ./allreduce -c 65 -t float
mpirun -np 6 ./allreduce -c 129 -t float
mpirun -np 6 ./allreduce -c 257 -t float
mpirun -np 6 ./allreduce -c 513 -t float
mpirun -np 6 ./allreduce -c 1025 -t float
mpirun -np 6 ./allreduce -c 2049 -t float
mpirun -np 6 ./allreduce -c 4097 -t float
mpirun -np 6 ./allreduce -c 8193 -t float
mpirun -np 6 ./allreduce -c 14337 -t float
mpirun -np 6 ./allreduce -c 16385 -t float
mpirun -np 6 ./allreduce -c 32769 -t float
mpirun -np 6 ./allreduce -c 65537 -t float
mpirun -np 6 ./allreduce -c 131073 -t float
mpirun -np 6 ./allreduce -c 262145 -t float
mpirun -np 6 ./allreduce -c 458753 -t float

mpirun -np 4 ./allreduce -c 16 -t float
mpirun -np 4 ./allreduce -c 32 -t float
mpirun -np 4 ./allreduce -c 64 -t float
mpirun -np 4 ./allreduce -c 128 -t float
mpirun -np 4 ./allreduce -c 256 -t float
mpirun -np 4 ./allreduce -c 512 -t float
mpirun -np 4 ./allreduce -c 1024 -t float
mpirun -np 4 ./allreduce -c 2048 -t float
mpirun -np 4 ./allreduce -c 4096 -t float
mpirun -np 4 ./allreduce -c 8192 -t float
mpirun -np 4 ./allreduce -c 14336 -t float
mpirun -np 4 ./allreduce -c 16384 -t float
mpirun -np 4 ./allreduce -c 32768 -t float
mpirun -np 4 ./allreduce -c 65536 -t float
mpirun -np 4 ./allreduce -c 131072 -t float
mpirun -np 4 ./allreduce -c 262144 -t float
mpirun -np 4 ./allreduce -c 458752 -t float
mpirun -np 4 ./allreduce -c 524288 -t float
mpirun -np 4 ./allreduce -c 11 -t float
mpirun -np 4 ./allreduce -c 222 -t float
mpirun -np 4 ./allreduce -c 3333 -t float
mpirun -np 4 ./allreduce -c 44444 -t float
mpirun -np 4 ./allreduce -c 15 -t float
mpirun -np 4 ./allreduce -c 31 -t float
mpirun -np 4 ./allreduce -c 63 -t float
mpirun -np 4 ./allreduce -c 127 -t float
mpirun -np 4 ./allreduce -c 255 -t float
mpirun -np 4 ./allreduce -c 511 -t float
mpirun -np 4 ./allreduce -c 1023 -t float
mpirun -np 4 ./allreduce -c 2047 -t float
mpirun -np 4 ./allreduce -c 4095 -t float
mpirun -np 4 ./allreduce -c 8191 -t float
mpirun -np 4 ./allreduce -c 14335 -t float
mpirun -np 4 ./allreduce -c 16383 -t float
mpirun -np 4 ./allreduce -c 32767 -t float
mpirun -np 4 ./allreduce -c 65535 -t float
mpirun -np 4 ./allreduce -c 131071 -t float
mpirun -np 4 ./allreduce -c 262143 -t float
mpirun -np 4 ./allreduce -c 458751 -t float
mpirun -np 4 ./allreduce -c 524287 -t float
mpirun -np 4 ./allreduce -c 17 -t float
mpirun -np 4 ./allreduce -c 34 -t float
mpirun -np 4 ./allreduce -c 65 -t float
mpirun -np 4 ./allreduce -c 129 -t float
mpirun -np 4 ./allreduce -c 257 -t float
mpirun -np 4 ./allreduce -c 513 -t float
mpirun -np 4 ./allreduce -c 1025 -t float
mpirun -np 4 ./allreduce -c 2049 -t float
mpirun -np 4 ./allreduce -c 4097 -t float
mpirun -np 4 ./allreduce -c 8193 -t float
mpirun -np 4 ./allreduce -c 14337 -t float
mpirun -np 4 ./allreduce -c 16385 -t float
mpirun -np 4 ./allreduce -c 32769 -t float
mpirun -np 4 ./allreduce -c 65537 -t float
mpirun -np 4 ./allreduce -c 131073 -t float
mpirun -np 4 ./allreduce -c 262145 -t float
mpirun -np 4 ./allreduce -c 458753 -t float

mpirun -np 2 ./allreduce -c 16 -t float
mpirun -np 2 ./allreduce -c 32 -t float
mpirun -np 2 ./allreduce -c 64 -t float
mpirun -np 2 ./allreduce -c 128 -t float
mpirun -np 2 ./allreduce -c 256 -t float
mpirun -np 2 ./allreduce -c 512 -t float
mpirun -np 2 ./allreduce -c 1024 -t float
mpirun -np 2 ./allreduce -c 2048 -t float
mpirun -np 2 ./allreduce -c 4096 -t float
mpirun -np 2 ./allreduce -c 8192 -t float
mpirun -np 2 ./allreduce -c 14336 -t float
mpirun -np 2 ./allreduce -c 16384 -t float
mpirun -np 2 ./allreduce -c 32768 -t float
mpirun -np 2 ./allreduce -c 65536 -t float
mpirun -np 2 ./allreduce -c 131072 -t float
mpirun -np 2 ./allreduce -c 262144 -t float
mpirun -np 2 ./allreduce -c 458752 -t float
mpirun -np 2 ./allreduce -c 524288 -t float
mpirun -np 2 ./allreduce -c 11 -t float
mpirun -np 2 ./allreduce -c 222 -t float
mpirun -np 2 ./allreduce -c 3333 -t float
mpirun -np 2 ./allreduce -c 44444 -t float
mpirun -np 2 ./allreduce -c 15 -t float
mpirun -np 2 ./allreduce -c 31 -t float
mpirun -np 2 ./allreduce -c 63 -t float
mpirun -np 2 ./allreduce -c 127 -t float
mpirun -np 2 ./allreduce -c 255 -t float
mpirun -np 2 ./allreduce -c 511 -t float
mpirun -np 2 ./allreduce -c 1023 -t float
mpirun -np 2 ./allreduce -c 2047 -t float
mpirun -np 2 ./allreduce -c 4095 -t float
mpirun -np 2 ./allreduce -c 8191 -t float
mpirun -np 2 ./allreduce -c 14335 -t float
mpirun -np 2 ./allreduce -c 16383 -t float
mpirun -np 2 ./allreduce -c 32767 -t float
mpirun -np 2 ./allreduce -c 65535 -t float
mpirun -np 2 ./allreduce -c 131071 -t float
mpirun -np 2 ./allreduce -c 262143 -t float
mpirun -np 2 ./allreduce -c 458751 -t float
mpirun -np 2 ./allreduce -c 524287 -t float
mpirun -np 2 ./allreduce -c 17 -t float
mpirun -np 2 ./allreduce -c 34 -t float
mpirun -np 2 ./allreduce -c 65 -t float
mpirun -np 2 ./allreduce -c 129 -t float
mpirun -np 2 ./allreduce -c 257 -t float
mpirun -np 2 ./allreduce -c 513 -t float
mpirun -np 2 ./allreduce -c 1025 -t float
mpirun -np 2 ./allreduce -c 2049 -t float
mpirun -np 2 ./allreduce -c 4097 -t float
mpirun -np 2 ./allreduce -c 8193 -t float
mpirun -np 2 ./allreduce -c 14337 -t float
mpirun -np 2 ./allreduce -c 16385 -t float
mpirun -np 2 ./allreduce -c 32769 -t float
mpirun -np 2 ./allreduce -c 65537 -t float
mpirun -np 2 ./allreduce -c 131073 -t float
mpirun -np 2 ./allreduce -c 262145 -t float
mpirun -np 2 ./allreduce -c 458753 -t float
